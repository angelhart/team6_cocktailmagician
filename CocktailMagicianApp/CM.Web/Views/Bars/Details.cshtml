@model BarViewModel

@{
	ViewData["Title"] = "Details";
	//Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
	<meta charset="utf-8" />
	<link rel="stylesheet" href="~/css/site.css" />
	<link rel="stylesheet" href="~/css/StarRating.css" />
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
}

<h1>@Html.DisplayFor(model => model.Name)</h1>
<body>
	<div>
		<h4>@Html.DisplayFor(model => model.Country)</h4>
		<h6>@Html.DisplayFor(model => model.City)</h6>
		<hr />
		<dl class="row">
			<dt class="col-sm-2">
				Address
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Street)
			</dd>
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Phone)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Phone)
			</dd>
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.ImagePath)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.ImagePath)
			</dd>
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Details)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Details)
			</dd>
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Cocktails)
			</dt>
			<dd class="col-sm-10">
				@foreach (var cocktail in Model.Cocktails)
				{
					<td>
						<p>
							<a asp-controller="Cocktails" asp-action="Details" asp-route-id="@cocktail.Id">@Html.DisplayFor(modelItem => cocktail.Name)</a>
						</p>
					</td>
				}
			</dd>
		</dl>
	</div>

	@*------------------------------
		Rating
		--------------------------------*@

	@if (User.IsInRole("Member"))
	{

		<div class="rating-box">
			<br />
			<h3>Rate this bar:</h3>
			<form asp-controller="Bars"
				  asp-action="AddRating"
				  method="post">

				<div asp-validation-summary="ModelOnly" class="text-danger"></div>

				<div class="rating">
					<span class="fa fa-star-o"></span>
					<span class="fa fa-star-o"></span>
					<span class="fa fa-star-o"></span>
					<span class="fa fa-star-o"></span>
					<span class="fa fa-star-o"></span>
				</div>
				<br />
				<br />
				<div class="form-group">
					<br />
					<input name="Score" type="number" hidden id="rating-value" value="rating-value" />
					<input name="BarId" asp-for="@Model.Id" />
					<input type="submit" value="Submit Rating" class="btn btn-primary">
				</div>
			</form>
		</div>
		<script src="~/js/StarRating.js"></script>
	}

	<table class="table">
		<thead>
			<tr>
				<th>
					@Html.DisplayNameFor(model => model.Comments)
				</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model.Comments)
			{
				<tr>
					<td>
						@Html.DisplayFor(modelItem => item.Text)<br />
					</td>
				</tr>
			}
		</tbody>
	</table>


	<h4>Comment</h4>
	<hr />
	<div class="row">
		<div class="col-md-4">
			<form asp-controller="Bars"
				  asp-action="AddComment">
				  @*method="post">*@

				<div asp-validation-summary="ModelOnly" class="text-danger"></div>

				<div class="form-group">
					<label name="Text" class="control-label"></label>
					<input name="BarId" value="@Model.Id">
					<textarea name="Text" class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
					<input type="submit" value="Add Comment" class="btn btn-primary" />
				</div>
			</form>
		</div>
	</div>

	<div>
		<a asp-action="Index">Back to List</a>
	</div>
	@{
		ViewData["BarId"] = Model.Id;
	}
	@*<partial name="_CommentPartial.cshtml" model="new BarCommentViewModel()" view-data="ViewData">*@
	@*@{await Html.RenderPartialAsync("_CommentPartial", new BarCommentViewModel(), ViewData);*@
	}
</body>
<br />

@*------------------------------
	endOfRating
	--------------------------------*@

